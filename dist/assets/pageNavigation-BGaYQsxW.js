import{g as s}from"./index-Ckibw6Vr.js";import{d as Y}from"./debounce-ikwS1dR6.js";function R(){const n=document.querySelector(".page-nav"),l=document.querySelector(".section-timeline .indicator .active-title"),w=document.querySelector(".section-timeline"),c=document.querySelector(".form-panel"),g=document.querySelector(".timeline-nav-wrapper"),z=document.querySelector("#video-travel-area"),L=document.querySelector(".get-involved-message")||document.querySelector("#acs-timeline"),q=document.querySelector("#get-involved-cards"),P=document.querySelector("#stories-hub-callout");if(!n||!l||!w)return;s.set(n,{opacity:0,pointerEvents:"none"});let y=!1,h=!1;const T=e=>{if(!c)return!1;const t=c.getBoundingClientRect(),o=e.clientX,r=e.clientY;return o>=t.left&&o<=t.right&&r>=t.top&&r<=t.bottom};w.addEventListener("mouseenter",e=>{!y&&!T(e)&&s.to(n,{opacity:1,pointerEvents:"auto",duration:.3,ease:"power2.out"})}),w.addEventListener("mouseleave",()=>{s.to(n,{opacity:0,pointerEvents:"none",duration:.3,ease:"power2.out"}),y=!1}),n.addEventListener("mouseenter",e=>{T(e)||s.to(l,{opacity:0,duration:.2,ease:"power2.out"})}),n.addEventListener("mouseleave",()=>{s.to(l,{opacity:1,duration:.2,ease:"power2.out"})}),c&&g&&(c.addEventListener("mouseenter",()=>{s.set(g,{pointerEvents:"none"})}),c.addEventListener("mouseleave",()=>{s.set(g,{pointerEvents:"auto"})}));const v=n.querySelector(".intro"),m=n.querySelector(".anniversary"),f=n.querySelector(".get-involved"),k=e=>{if(l.textContent===e)return;const t=s.timeline();t.to(l,{opacity:0,duration:.18,onComplete:()=>{l.textContent=e}}),t.to(l,{opacity:1,duration:.24})},C=e=>{if(!e)return 0;e.offsetHeight;let t=0,o=e;for(;o;)t+=o.offsetTop,o=o.offsetParent;return t},S=(e,t,o,r,O=!1,N=0)=>{e.preventDefault(),n.querySelectorAll("a").forEach(a=>a.classList.remove("active")),t&&t.classList.add("active"),k(o),s.to(n,{opacity:0,pointerEvents:"none",duration:.2,ease:"power2.out"}),y=!0,h=!0;const p=a=>{setTimeout(()=>{h=!1,u()},a)};O?window.lenis?(window.lenis.scrollTo(0,{duration:1.5}),p(1500)):(window.scrollTo({top:0,behavior:"smooth"}),p(1e3)):r&&(window.lenis?(window.lenis.scrollTo(r,{offset:N,duration:2,easing:a=>Math.min(1,1.001-Math.pow(2,-10*a))}),p(2e3)):setTimeout(()=>{const a=C(r);window.scrollTo({top:a+N,behavior:"smooth"}),p(1e3)},50))};v&&v.addEventListener("click",e=>S(e,v,"Intro",null,!0)),m&&m.addEventListener("click",e=>{const t=P||L,o=t?t.offsetHeight-window.innerHeight/2:0;S(e,m,"150 Years of ACS",t,!1,o)}),f&&f.addEventListener("click",e=>S(e,f,"Get Involved",q,!1,-48));const i=[{id:"intro",element:document.body,title:"Intro",link:v,top:0,bottom:0},{id:"anniversary",element:z||L,title:"150 Years of ACS",link:m,top:0,bottom:0},{id:"getinvolved",element:q,title:"Get Involved",link:f,top:0,bottom:0}];function d(){i.forEach((e,t)=>{e.element&&(e.top=C(e.element),e.bottom=e.top+e.element.offsetHeight)}),i[1].element?i[0].bottom=i[1].top:i[0].bottom=window.innerHeight,i[2].element&&(i[1].bottom=i[2].top),i[2].bottom=document.body.scrollHeight}d();let H=null;function u(){h||requestAnimationFrame(()=>{const e=window.pageYOffset+window.innerHeight/2;let t=i[0];for(let o=i.length-1;o>=0;o--){const r=i[o];if(!(!r.element&&r.id!=="intro")&&e>=r.top&&e<r.bottom){t=r;break}}H!==t.id&&(H=t.id,n.querySelectorAll("a").forEach(o=>o.classList.remove("active")),t.link&&t.link.classList.add("active"),k(t.title))})}window.removeEventListener("scroll",u),window.addEventListener("scroll",u);const E=Y(()=>{document.body.offsetHeight,d(),requestAnimationFrame(()=>{d(),u()})},150);window.addEventListener("resize",E),window.addEventListener("orientationchange",()=>{setTimeout(()=>{E()},300)}),new ResizeObserver(()=>{E()}).observe(document.body);const b=()=>{d(),u()};b(),setTimeout(b,500),document.fonts&&document.fonts.ready&&document.fonts.ready.then(b);let A=!1;const I=()=>{A||(A=!0,d(),window.removeEventListener("scroll",I))};window.addEventListener("scroll",I)}export{R as updatePageNavigation};
