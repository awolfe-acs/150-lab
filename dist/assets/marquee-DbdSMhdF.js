import{g as s}from"./index-DHkcmSZ9.js";import{d as p}from"./debounce-ikwS1dR6.js";import{l as f}from"./logger-2Ii2FPkr.js";function v(){const a=document.querySelector(".form-panel .animation-column"),e=a?.querySelector("img");if(!a||!e){f.warn("Form panel animation column or image not found");return}let t=a.querySelector(".marquee-container");if(!t){t=document.createElement("div"),t.className="marquee-container";const l=e.cloneNode(!0);l.className+=" cloned-image",e.remove(),t.appendChild(e),t.appendChild(l),a.appendChild(t)}const r=[e,t.querySelector(".cloned-image")];let n=null;const i=()=>{n&&(n.kill(),n=null),a.offsetHeight,e.offsetHeight,setTimeout(()=>{const o=e.getBoundingClientRect().height;if(o<=0){if(window.innerWidth<580)return;f.warn("Image height is 0, retrying marquee setup..."),setTimeout(i,200);return}s.set(r,{y:0,top:"auto",opacity:1}),s.set(e,{position:"absolute",top:0,left:0}),s.set(r[1],{position:"absolute",top:o+"px",left:0});const c=s.timeline({repeat:-1,ease:"none"}),g=Math.max(o/30,2);c.to(r,{y:-o,duration:g,ease:"none"}),c.set(r,{y:0}),n=c},100)},u=p(()=>{document.body.offsetHeight,i()},250);(()=>{e.complete&&e.naturalHeight!==0?i():(e.addEventListener("load",i),setTimeout(i,1e3))})(),window.addEventListener("resize",u),window.addEventListener("orientationchange",()=>{setTimeout(u,300)}),window.cleanupInfiniteMarquee=()=>{n&&(n.kill(),n=null),window.removeEventListener("resize",u)};let m=!1;const d=()=>{if(!m){m=!0;const l=e.getBoundingClientRect().height,o=parseFloat(r[1].style.top||"0");Math.abs(l-o)>5&&i(),window.removeEventListener("scroll",d)}};window.addEventListener("scroll",d),document.fonts&&document.fonts.ready&&document.fonts.ready.then(()=>{setTimeout(i,100)})}export{v as initInfiniteMarqueeAnimation};
