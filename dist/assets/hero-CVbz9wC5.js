import{g as l,S as m}from"./vendor-gsap-BYvdLAYj.js";import F from"./index-BbrXr4yz.js";import{animationState as g}from"./animationConfig-BcZmv9NB.js";import{setEnterButtonClicked as O,playBackgroundAudio as A,setHeroAnimationComplete as P}from"./audio-DU4JeIw_.js";import{l as T}from"./logger-2Ii2FPkr.js";function q(t){if(window.scrollDownIcon&&document.contains(window.scrollDownIcon))return;const e=document.createElement("div");e.className="scroll-down-icon",e.innerHTML=`
    <div class="scroll-text">SCROLL</div>
    <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24">
      <title>mouse-scroll-down</title>
      <g fill="#F7F7F7">
        <g fill="none">
          <path d="M0 0h24v24h-24v-24Z"></path>
          <path class="mouse-body" stroke="#F7F7F7" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M12 17v0c-2.946 0-5.357-2.411-5.357-5.357v-4.286c-8.88178e-16-2.946 2.411-5.357 5.357-5.357v0c2.946 0 5.357 2.411 5.357 5.357v4.286c3.55271e-15 2.946-2.411 5.357-5.357 5.357Z"></path>
          <path class="scroll-arrow" stroke="#F7F7F7" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9 20L12 22 15 20"></path>
          <path class="scroll-indicator" stroke="#F7F7F7" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M12 6.286v2.143"></path>
        </g>
      </g>
    </svg>
  `,e.style.cssText=`
    position: fixed;
    bottom: calc(12vh - 16px);
    left: 50%;
    transform: translateX(-50%);
    z-index: 1000;
    opacity: 0;
    width: 64px;
    height: 90px;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 8px;
    transition: all 0.3s ease;
  `;const n=e.querySelector(".scroll-text");n&&(n.style.cssText=`
      color: #F7F7F7;
      font-size: 12px;
      font-weight: 400;
      letter-spacing: 2px;
      text-align: center;
      line-height: 1;
      margin: 0;
      padding: 0;
      text-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
    `);const s=document.querySelector("#hero-travel-area");s?s.appendChild(e):document.body.appendChild(e),l.to(e,{opacity:1,duration:.8,ease:"power2.out",delay:.3});const o=e.querySelector(".scroll-indicator");l.to(o,{y:3,duration:1.2,ease:"power2.inOut",repeat:-1,yoyo:!0});const a=e.querySelector(".scroll-arrow");l.to(a,{opacity:.6,duration:1.5,ease:"power2.inOut",repeat:-1,yoyo:!0}),m.create({trigger:"#cover-travel-area",start:"top top",end:"bottom 0%",scrub:.5,markers:!1,onUpdate:i=>{const r=1-i.progress;l.set(e,{opacity:r,overwrite:!0})},onLeave:()=>{l.set(e,{opacity:0})},onEnterBack:i=>{const r=1-i.progress;l.set(e,{opacity:r})}}),window.scrollDownIcon=e,window.scrollDownIconCleanup=()=>{m.getAll().forEach(i=>{(i.trigger===e||i.vars?.trigger==="#cover-travel-area")&&(i.trigger===e||i.animation&&i.animation.targets().includes(e))&&i.kill()}),e&&e.parentNode&&e.remove(),window.scrollDownIcon=null,window.scrollDownIconCleanup=null}}let E=null;function N(){g.heroHeadingFadeScrollTrigger&&(g.heroHeadingFadeScrollTrigger.kill(),g.heroHeadingFadeScrollTrigger=null);const t=document.querySelector("#hero-area h1");if(!t){T.warn("#hero-area h1 not found for fade animation setup.");return}let e=null,n=null;g.heroHeadingFadeScrollTrigger=m.create({trigger:"#hero-travel-area",start:"16% top",end:"36% top",scrub:!0,markers:!1,invalidateOnRefresh:!0,fastScrollEnd:!0,id:"hero-heading-fade",onUpdate:s=>{const o=s.progress,a=Math.round((1-o)*10)/10;a!==e&&(e=a,t.style.opacity=a);const i=Math.round(o*8);i!==n&&(n=i,t.style.filter=i>0?`blur(${i}px)`:"none")},onLeave:()=>{t.style.opacity="0",t.style.filter="blur(8px)",e=0,n=8},onEnterBack:()=>{e=null,n=null},onLeaveBack:()=>{t.style.opacity="1",t.style.filter="none",e=1,n=0}})}function z(){window._coverAreaTimeline?(console.log("[hero.js] Playing cover area animation - all modules loaded"),window._coverAreaTimeline.play()):console.warn("[hero.js] Cover area timeline not initialized")}function D(){const t=document.querySelector("#cover-area .cover-logo"),e=document.querySelector("#countdown"),n=document.querySelector("#cover-area button.enter-experience"),s=document.querySelector("header"),o=document.querySelector("nav"),a=document.querySelector(".section-timeline"),i=document.querySelector("#app");if(!t||!n)return;i&&l.set(i,{opacity:0}),s&&l.set(s,{opacity:0}),a&&l.set(a,{opacity:0});const r=document.querySelector(".share-button-pinned");r&&l.set(r,{opacity:0}),window.lenis&&window.lenis.stop(),l.set(o,{opacity:1}),l.set(t,{position:"fixed",top:"calc(50% - 44px)",left:"50%",transform:"translate(-50%, -50%)",zIndex:1e3,opacity:0,scale:.95,pointerEvents:"none"}),e&&l.set(e,{opacity:0}),l.set(n,{opacity:0});const d=l.timeline({paused:!0});window._coverAreaTimeline=d;const u=document.querySelector("#initial-loader");i&&d.to(i,{opacity:1,duration:.6,ease:"power2.out",onStart:()=>{u&&(u.classList.add("hidden"),setTimeout(()=>{u.remove()},400))}}),d.to(t,{opacity:1,scale:1,pointerEvents:"auto",duration:1.2,ease:"power1.out"},"+=0.32"),e&&d.to(e,{opacity:1,duration:.4,ease:"power1.out"},"-=0.6"),d.to(n,{opacity:1,duration:.5,ease:"power2.out",onComplete:()=>{n.style.pointerEvents="auto"}},"-=0.2"),n&&n.addEventListener("click",()=>{n.style.pointerEvents="none",s&&l.to(s,{opacity:1,duration:.8,ease:"power2.inOut"}),a&&l.to(a,{opacity:1,duration:.8,ease:"power2.inOut",delay:.2}),window.userInteracted=!0,O(!0),window.enterButtonClicked=!0,window.enableMouseParticles&&window.enableMouseParticles(),document.dispatchEvent(new CustomEvent("veryEarlyParticleFade")),A(!0),window.audioRetryTimer||(window.audioRetryTimer=setInterval(()=>{window.audioInitialized?(clearInterval(window.audioRetryTimer),window.audioRetryTimer=null):window.enterButtonClicked&&!window.audioMuted&&(window.audioRetryCount<window.maxAudioRetries?A(!0):(T.warn(`Exceeded maximum audio retry attempts (${window.maxAudioRetries}). Stopping retries.`),clearInterval(window.audioRetryTimer),window.audioRetryTimer=null))},500)),window.lenis&&window.lenis.start(),l.to(n,{opacity:0,duration:.5,ease:"power2.in",onComplete:()=>{q(),n.style.pointerEvents="none"}}),r&&l.to(r,{opacity:1,duration:.8,delay:.4,ease:"power2.out"});const c=document.querySelector(".sound-toggle");c&&c.classList.add("active"),setTimeout(()=>{B(t,e)},100)})}function B(t,e){let n=null,s=-1,o=null,a=!1,i=!1;const r=document.querySelector("#cover-travel-area");if(r){const u=r.getBoundingClientRect(),c=u.height,p=window.innerHeight,w=Math.abs(u.top)/(c-p*.67);if(w>=.9)i=!0,l.set([t,e],{opacity:0}),s=0;else{const f=Math.max(0,1-w);l.set([t,e],{opacity:f}),s=f}}else l.set([t,e],{opacity:1});function d(){return n&&n.kill(),n=m.create({trigger:"#cover-travel-area",start:"top top",end:"67% center",scrub:.5,markers:!1,id:"cover-logo-fade",invalidateOnRefresh:!0,fastScrollEnd:!0,onUpdate:u=>{if(!a)return;const c=1-u.progress;Math.abs(c-s)>.01&&(s=c,t.style.opacity=c,o&&(o.kill(),o=null),e&&(e.style.opacity=c))},onLeave:()=>{a&&(o&&(o.kill(),o=null),t.style.opacity="0",t.style.pointerEvents="none",s=0,e&&(e.style.opacity="0"))},onEnterBack:()=>{if(!a)return;const c=1-n.progress;t.style.opacity=c,c>.1&&(t.style.pointerEvents="auto"),s=c,o&&(o.kill(),o=null),e&&(o=l.to(e,{opacity:c,duration:.8,delay:.4,ease:"power2.out",onUpdate:function(){parseFloat(e.style.opacity)},onComplete:function(){o=null}}))},onLeaveBack:()=>{a&&(o&&(o.kill(),o=null),t.style.opacity="1",t.style.pointerEvents="auto",s=1,e&&(e.style.opacity="1"))}}),setTimeout(()=>{if(a=!0,!i&&n){const u=n.progress,c=1-u;u>0&&u<1?(t.style.opacity=c,s=c,e&&(e.style.opacity=c)):u>=1&&(t.style.opacity="0",s=0,e&&(e.style.opacity="0"))}},200),n}return d()}function $(){const t=document.querySelector("#hero-area h1"),e=document.querySelector("#hero-number");if(!t||!e)return;t.getAttribute("data-original-content")||t.setAttribute("data-original-content",t.textContent),m.getAll().forEach(r=>{(r.vars.trigger==="#hero-area"||r.vars.trigger==="#hero-travel-area")&&r.kill()});const n=e.innerText||"2026";e.getAttribute("data-original-content")||e.setAttribute("data-original-content",n),e.innerHTML="",e.style.setProperty("--digit-opacity","0"),n.split("").forEach(r=>{const d=document.createElement("span");d.className="digit",d.textContent=r,d.setAttribute("data-digit",r),e.appendChild(d)}),l.set(e,{opacity:0}),l.set(t,{opacity:0}),E&&(E.revert(),E=null),E=new F(t,{types:"words,chars",absolute:!1});const s=E;l.set(s.chars,{opacity:0,z:150,scale:1.2,transformPerspective:1e3,transformOrigin:"center center",filter:"blur(6px)"});const o=[...s.chars];for(let r=o.length-1;r>0;r--){const d=Math.floor(Math.random()*(r+1));[o[r],o[d]]=[o[d],o[r]]}const a=l.timeline({paused:!0,onComplete:()=>{P(!0),window.heroAnimationComplete=!0;const r=new CustomEvent("heroAnimationComplete");document.dispatchEvent(r)}});a.to(t,{opacity:1,duration:.8,ease:"power2.out"}),a.to(o,{opacity:1,z:0,scale:1,filter:"blur(0px)",duration:1.25,stagger:.03,ease:"power2.out",onComplete:()=>{const r=new CustomEvent("particleFadeStart");document.dispatchEvent(r)}}),a.to(e,{opacity:1,duration:1.5,ease:"power1.inOut"});const i=e.querySelectorAll(".digit");l.set(i,{y:10,z:-120,transformPerspective:1e3,transformOrigin:"center center"}),l.set(e,{filter:"blur(6px)"}),a.to(i,{y:0,z:0,duration:2.5,stagger:.1,ease:"power3.out"},"-=0.6"),a.to(e,{"--digit-opacity":.44,filter:"blur(0px)",duration:2.5,ease:"power3.out"},"-=2.5"),m.create({trigger:"#hero-travel-area",start:"top 90%",end:"top 0%",animation:a,scrub:1,markers:!1,invalidateOnRefresh:!0,fastScrollEnd:!0,onEnter:()=>{const r=new CustomEvent("veryEarlyParticleFade");document.dispatchEvent(r)}})}function U(){const t=document.querySelector("#hero-number");if(!t){T.warn("#hero-number element not found for countdown animation.");return}const e=t.querySelectorAll(".digit");if(e.length!==4){T.warn("Expected 4 digit spans in #hero-number, found:",e.length);return}if(!document.querySelector("#hero-travel-area")){T.warn("#hero-travel-area not found for countdown animation.");return}let s=2026,o=[2,0,2,6],a=1,i=null,r=0;const d=c=>{const p=Math.floor(c/1e3),w=Math.floor(c%1e3/100),f=Math.floor(c%100/10),y=c%10;p!==o[0]&&(o[0]=p,e[0].textContent=p),w!==o[1]&&(o[1]=w,e[1].textContent=w),f!==o[2]&&(o[2]=f,e[2].textContent=f),y!==o[3]&&(o[3]=y,e[3].textContent=y)};g.heroNumberTween?.scrollTrigger&&g.heroNumberTween.scrollTrigger.kill(),m.getById("hero-scale")?.kill(),m.getById("hero-fade-out")?.kill();const u=m.create({trigger:"#hero-travel-area",start:"15% top",end:"bottom bottom",scrub:!0,markers:!1,invalidateOnRefresh:!0,fastScrollEnd:!0,id:"hero-countdown",onUpdate:c=>{const p=c.progress,f=Math.min(1,p/.706),y=Math.round(2026-f*150);y!==s&&(s=y,g.heroYearObj.year=y,d(y));const b=Math.round((1-p*.5)*100)/100;b!==a&&(a=b,t.style.transform=`scale(${b})`);const k=.44+f*.56,v=.88,C=.94;let S=1,h=0;if(p>v){const M=Math.min(1,(p-v)/(C-v));S=1-M,h=Math.round(M*6)}const x=Math.round(k*S*10)/10;x!==i&&(i=x,t.style.setProperty("--digit-opacity",x)),h!==r&&(r=h,t.style.filter=h>0?`blur(${h}px)`:"none")},onLeave:()=>{s=1876,a=.5,i=0,r=6,g.heroYearObj.year=1876,d(1876),t.style.transform="scale(0.5)",t.style.setProperty("--digit-opacity","0"),t.style.filter="blur(6px)"},onLeaveBack:()=>{s=2026,a=1,i=.44,r=0,g.heroYearObj.year=2026,d(2026),t.style.transform="scale(1)",t.style.setProperty("--digit-opacity","0.44"),t.style.filter="none"},onRefresh:c=>{const p=c.progress,f=Math.min(1,p/.706),y=Math.round(2026-f*150);s=y,g.heroYearObj.year=y,d(y);const b=Math.round((1-p*.5)*100)/100;a=b,t.style.transform=`scale(${b})`;const k=.44+f*.56,v=.88,C=.94;let S=1,h=0;if(p>v){const x=Math.min(1,(p-v)/(C-v));S=1-x,h=Math.round(x*6)}i=Math.round(k*S*10)/10,r=h,t.style.setProperty("--digit-opacity",i),t.style.filter=h>0?`blur(${h}px)`:"none"}});g.heroNumberTween={scrollTrigger:u}}function Y(){document.querySelectorAll(".pin-top-top").forEach(function(t){let e=t.parentElement;t.id==="cover-area"?m.create({trigger:"#cover-travel-area",start:"top top",end:"bottom top",pin:t,pinSpacing:!1,anticipatePin:1,onLeaveBack:n=>{n.pin.style.transform="translate3d(0px, 0px, 0px)"}}):t.id==="hero-area"?m.create({trigger:t,endTrigger:"#hero-travel-area",start:"top top",end:"bottom 80%",pin:t,pinSpacing:!1,anticipatePin:1,onLeaveBack:n=>{n.pin.style.transform="translate3d(0px, 0px, 0px)"}}):m.create({trigger:e,start:"top top",end:"bottom bottom",pin:t,pinSpacing:!1})})}export{D as initCoverArea,$ as initHeroAnimation,U as initHeroNumberCountdown,Y as initHeroPinning,z as playCoverAreaAnimation,N as setupHeroHeadingFadeAnimation};
