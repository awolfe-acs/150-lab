import{g as a,S as f}from"./index-D9dpT1P1.js";import S from"./index-BbrXr4yz.js";import{animationState as p}from"./animationConfig-BcZmv9NB.js";import{setEnterButtonClicked as x,playBackgroundAudio as b,setHeroAnimationComplete as T}from"./audio-Ba-8g_Sb.js";import{l as m}from"./logger-2Ii2FPkr.js";function E(t){if(window.scrollDownIcon&&document.contains(window.scrollDownIcon))return;const e=document.createElement("div");e.className="scroll-down-icon",e.innerHTML=`
    <div class="scroll-text">SCROLL</div>
    <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24">
      <title>mouse-scroll-down</title>
      <g fill="#F7F7F7">
        <g fill="none">
          <path d="M0 0h24v24h-24v-24Z"></path>
          <path class="mouse-body" stroke="#F7F7F7" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M12 17v0c-2.946 0-5.357-2.411-5.357-5.357v-4.286c-8.88178e-16-2.946 2.411-5.357 5.357-5.357v0c2.946 0 5.357 2.411 5.357 5.357v4.286c3.55271e-15 2.946-2.411 5.357-5.357 5.357Z"></path>
          <path class="scroll-arrow" stroke="#F7F7F7" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9 20L12 22 15 20"></path>
          <path class="scroll-indicator" stroke="#F7F7F7" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M12 6.286v2.143"></path>
        </g>
      </g>
    </svg>
  `,e.style.cssText=`
    position: fixed;
    bottom: calc(12vh - 16px);
    left: 50%;
    transform: translateX(-50%);
    z-index: 1000;
    opacity: 0;
    width: 64px;
    height: 90px;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 8px;
    transition: all 0.3s ease;
  `;const o=e.querySelector(".scroll-text");o&&(o.style.cssText=`
      color: #F7F7F7;
      font-size: 12px;
      font-weight: 400;
      letter-spacing: 2px;
      text-align: center;
      line-height: 1;
      margin: 0;
      padding: 0;
      text-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
    `);const i=document.querySelector("#hero-travel-area");i?i.appendChild(e):document.body.appendChild(e),a.to(e,{opacity:1,duration:.8,ease:"power2.out",delay:.3});const n=e.querySelector(".scroll-indicator");a.to(n,{y:3,duration:1.2,ease:"power2.inOut",repeat:-1,yoyo:!0});const s=e.querySelector(".scroll-arrow");a.to(s,{opacity:.6,duration:1.5,ease:"power2.inOut",repeat:-1,yoyo:!0}),f.create({trigger:"#cover-travel-area",start:"top top",end:"bottom 0%",scrub:.5,markers:!1,onUpdate:c=>{},onLeave:()=>{a.set(e,{opacity:0})},onEnterBack:()=>{a.set(e,{opacity:0})}}),window.scrollDownIcon=e,window.scrollDownIconCleanup=()=>{f.getAll().forEach(c=>{(c.trigger===e||c.vars?.trigger==="#cover-travel-area")&&(c.trigger===e||c.animation&&c.animation.targets().includes(e))&&c.kill()}),e&&e.parentNode&&e.remove(),window.scrollDownIcon=null,window.scrollDownIconCleanup=null}}let h=null,w=null;function M(){p.heroHeadingFadeScrollTrigger&&(p.heroHeadingFadeScrollTrigger.kill(),p.heroHeadingFadeScrollTrigger=null);const t=document.querySelector("#hero-area h1");if(t){let e=t.querySelectorAll(".char");if(!e||e.length===0){const n=t.getAttribute("data-original-content")||t.textContent;t.innerHTML=n;try{w&&(w.revert(),w=null),w=new S(t,{types:"words,chars",absolute:!1}),e=w.chars,a.set(e,{opacity:1,z:0,scale:1,filter:"blur(0px)",transformPerspective:1e3,transformOrigin:"center center"})}catch(s){m.error("Error re-splitting hero heading:",s);return}}if(!e||e.length===0){m.warn("Still no hero heading characters found after attempting re-split. Aborting animation setup.");return}t.offsetHeight;const o=[...e];for(let n=o.length-1;n>0;n--){const s=Math.floor(Math.random()*(n+1));[o[n],o[s]]=[o[s],o[n]]}const i=a.timeline({paused:!0});i.to(o,{opacity:0,stagger:.02,ease:"power1.in"},0),i.to(t,{filter:"blur(8px)",ease:"power1.in"},0),p.heroHeadingFadeScrollTrigger=f.create({animation:i,trigger:"#hero-travel-area",start:"16% top",end:"36% top",scrub:1,markers:!1,invalidateOnRefresh:!0,fastScrollEnd:!0,onRefresh:n=>{i&&i.progress(n.progress)},onLeave:()=>{a.set(o,{opacity:0}),a.set(t,{filter:"blur(8px)"})},onEnterBack:()=>{const n=p.heroHeadingFadeScrollTrigger?p.heroHeadingFadeScrollTrigger.progress:0;i&&i.progress(n)},onLeaveBack:()=>{a.set(o,{opacity:1,clearProps:"transform"}),a.set(t,{filter:"blur(0px)"}),i&&i.progress(0)}})}else m.warn("#hero-area h1 not found for fade animation setup.")}function q(){window._coverAreaTimeline?(console.log("[hero.js] Playing cover area animation - all modules loaded"),window._coverAreaTimeline.play()):console.warn("[hero.js] Cover area timeline not initialized")}function H(){const t=document.querySelector("#cover-area .cover-logo"),e=document.querySelector("#countdown"),o=document.querySelector("#cover-area button.enter-experience"),i=document.querySelector("header"),n=document.querySelector("nav"),s=document.querySelector(".section-timeline"),c=document.querySelector("#app");if(!t||!o)return;c&&a.set(c,{opacity:0}),i&&a.set(i,{opacity:0}),s&&a.set(s,{opacity:0});const r=document.querySelector(".share-button-pinned");r&&a.set(r,{opacity:0}),window.lenis&&window.lenis.stop(),a.set(n,{opacity:1}),a.set(t,{position:"fixed",top:"calc(50% - 44px)",left:"50%",transform:"translate(-50%, -50%)",zIndex:1e3,opacity:0,scale:.95,pointerEvents:"none"}),e&&a.set(e,{opacity:0}),a.set(o,{opacity:0});const l=a.timeline({paused:!0});window._coverAreaTimeline=l;const u=document.querySelector("#initial-loader");c&&l.to(c,{opacity:1,duration:.6,ease:"power2.out",onStart:()=>{u&&(u.classList.add("hidden"),setTimeout(()=>{u.remove()},400))}}),l.to(t,{opacity:1,scale:1,pointerEvents:"auto",duration:1.2,ease:"power1.out"},"-=0.3"),e&&l.to(e,{opacity:1,duration:.4,ease:"power1.out"},"-=0.6"),l.to(o,{opacity:1,duration:.5,ease:"power2.out",onComplete:()=>{o.style.pointerEvents="auto"}},"-=0.2"),o&&o.addEventListener("click",()=>{o.style.pointerEvents="none",i&&a.to(i,{opacity:1,duration:.8,ease:"power2.inOut"}),s&&a.to(s,{opacity:1,duration:.8,ease:"power2.inOut",delay:.2}),window.userInteracted=!0,x(!0),window.enterButtonClicked=!0,window.enableMouseParticles&&window.enableMouseParticles(),document.dispatchEvent(new CustomEvent("veryEarlyParticleFade")),b(!0),window.audioRetryTimer||(window.audioRetryTimer=setInterval(()=>{window.audioInitialized?(clearInterval(window.audioRetryTimer),window.audioRetryTimer=null):window.enterButtonClicked&&!window.audioMuted&&(window.audioRetryCount<window.maxAudioRetries?b(!0):(m.warn(`Exceeded maximum audio retry attempts (${window.maxAudioRetries}). Stopping retries.`),clearInterval(window.audioRetryTimer),window.audioRetryTimer=null))},500)),window.lenis&&window.lenis.start(),a.to(o,{opacity:0,duration:.5,ease:"power2.in",onComplete:()=>{E(),o.style.pointerEvents="none"}}),r&&a.to(r,{opacity:1,duration:.8,delay:.4,ease:"power2.out"});const d=document.querySelector(".sound-toggle");d&&d.classList.add("active"),setTimeout(()=>{C(t,e)},100)})}function C(t,e){let o=null,i=-1,n=null,s=!1,c=!1;const r=document.querySelector("#cover-travel-area");if(r){const u=r.getBoundingClientRect(),d=u.height,y=window.innerHeight,g=Math.abs(u.top)/(d-y*.67);if(g>=.9)c=!0,a.set([t,e],{opacity:0}),i=0;else{const v=Math.max(0,1-g);a.set([t,e],{opacity:v}),i=v}}else a.set([t,e],{opacity:1});function l(){return o&&o.kill(),o=f.create({trigger:"#cover-travel-area",start:"top top",end:"67% center",scrub:.5,markers:!1,id:"cover-logo-fade",invalidateOnRefresh:!0,fastScrollEnd:!0,onUpdate:u=>{if(!s)return;const d=1-u.progress;Math.abs(d-i)>.01&&(i=d,t.style.opacity=d,n&&(n.kill(),n=null),e&&(e.style.opacity=d))},onLeave:()=>{s&&(n&&(n.kill(),n=null),t.style.opacity="0",t.style.pointerEvents="none",i=0,e&&(e.style.opacity="0"))},onEnterBack:()=>{if(!s)return;const d=1-o.progress;t.style.opacity=d,d>.1&&(t.style.pointerEvents="auto"),i=d,n&&(n.kill(),n=null),e&&(n=a.to(e,{opacity:d,duration:.8,delay:.4,ease:"power2.out",onUpdate:function(){parseFloat(e.style.opacity)},onComplete:function(){n=null}}))},onLeaveBack:()=>{s&&(n&&(n.kill(),n=null),t.style.opacity="1",t.style.pointerEvents="auto",i=1,e&&(e.style.opacity="1"))}}),setTimeout(()=>{if(s=!0,!c&&o){const u=o.progress,d=1-u;u>0&&u<1?(t.style.opacity=d,i=d,e&&(e.style.opacity=d)):u>=1&&(t.style.opacity="0",i=0,e&&(e.style.opacity="0"))}},200),o}return l()}function B(){const t=document.querySelector("#hero-area h1"),e=document.querySelector("#hero-number");if(!t||!e)return;t.getAttribute("data-original-content")||t.setAttribute("data-original-content",t.textContent),f.getAll().forEach(r=>{(r.vars.trigger==="#hero-area"||r.vars.trigger==="#hero-travel-area")&&r.kill()});const o=e.innerText||"2026";e.getAttribute("data-original-content")||e.setAttribute("data-original-content",o),e.innerHTML="",e.style.setProperty("--digit-opacity","0"),o.split("").forEach(r=>{const l=document.createElement("span");l.className="digit",l.textContent=r,l.setAttribute("data-digit",r),e.appendChild(l)}),a.set(e,{opacity:0}),a.set(t,{opacity:0}),h&&(h.revert(),h=null),h=new S(t,{types:"words,chars",absolute:!1});const i=h;a.set(i.chars,{opacity:0,z:150,scale:1.2,transformPerspective:1e3,transformOrigin:"center center",filter:"blur(16px)"});const n=[...i.chars];for(let r=n.length-1;r>0;r--){const l=Math.floor(Math.random()*(r+1));[n[r],n[l]]=[n[l],n[r]]}const s=a.timeline({paused:!0,onComplete:()=>{T(!0),window.heroAnimationComplete=!0;const r=new CustomEvent("heroAnimationComplete");document.dispatchEvent(r)}});s.to(t,{opacity:1,duration:.8,ease:"power2.out"}),s.to(n,{opacity:1,z:0,scale:1,filter:"blur(0px)",duration:1.25,stagger:.03,ease:"power2.out",onComplete:()=>{const r=new CustomEvent("particleFadeStart");document.dispatchEvent(r)}}),s.to(e,{opacity:1,duration:1.5,ease:"power1.inOut"});const c=e.querySelectorAll(".digit");if(a.set(c,{y:10,z:-120,transformPerspective:1e3,transformOrigin:"center center"}),s.to(c,{y:0,z:0,duration:2.5,stagger:.1,ease:"power3.out"},"-=0.6"),s.to(e,{"--digit-opacity":.44,duration:2.5,ease:"power3.out"},"-=2.5"),f.create({trigger:"#hero-travel-area",start:"top 90%",end:"top 0%",animation:s,scrub:1,markers:!1,invalidateOnRefresh:!0,fastScrollEnd:!0,onEnter:()=>{const r=new CustomEvent("veryEarlyParticleFade");document.dispatchEvent(r)}}),e){let r=null;e.querySelectorAll(".digit"),f.create({trigger:"#hero-travel-area",start:"15% top",end:"bottom bottom",scrub:1,markers:!1,invalidateOnRefresh:!0,fastScrollEnd:!0,onUpdate:u=>{const d=Math.round((1-u.progress*.5)*100)/100;d!==r&&(r=d,e.style.transform=`scale(${d})`)},onLeave:()=>{e.style.transform="scale(0.5)",r=.5},onEnterBack:()=>{r=null},onLeaveBack:()=>{e.style.transform="scale(1)",r=1},id:"hero-scale"});let l=null;f.create({trigger:"#hero-travel-area",start:"bottom 90%",end:"bottom 80%",scrub:1,markers:!1,invalidateOnRefresh:!0,fastScrollEnd:!0,onUpdate:function(u){const d=u.progress;let y=1;p.heroNumberTween&&p.heroNumberTween.scrollTrigger&&(y=.44+p.heroNumberTween.scrollTrigger.progress*.56);const g=Math.round(y*(1-d)*10)/10;g!==l&&(l=g,e.style.setProperty("--digit-opacity",g))},onLeave:()=>{e.style.setProperty("--digit-opacity","0"),l=0},onEnterBack:()=>{l=null},onLeaveBack:()=>{l=null},id:"hero-fade-out"})}}function R(){const t=document.querySelector("#hero-number");if(t){let e=null,o=null,i=null;const n=()=>{e=t.querySelectorAll(".digit")};if(requestAnimationFrame(n),p.heroNumberTween)p.heroNumberTween.scrollTrigger&&p.heroNumberTween.scrollTrigger.enable(),p.heroNumberTween.resume();else{const s=["0","1","2","3","4","5","6","7","8","9"];p.heroNumberTween=a.to(p.heroYearObj,{year:1876,ease:"none",paused:!0,scrollTrigger:{trigger:"#hero-travel-area",start:"15% top",end:"75% bottom",scrub:1,markers:!1,invalidateOnRefresh:!0,fastScrollEnd:!0,id:"hero-countdown",onUpdate:function(c){const r=Math.round(2026-c.progress*150);if(r===o)return;o=r,p.heroYearObj.year=r,(!e||e.length===0)&&n();const l=Math.floor(r/1e3),u=Math.floor(r%1e3/100),d=Math.floor(r%100/10),y=r%10;e&&e.length===4&&(e[0].textContent!==s[l]&&(e[0].textContent=s[l]),e[1].textContent!==s[u]&&(e[1].textContent=s[u]),e[2].textContent!==s[d]&&(e[2].textContent=s[d]),e[3].textContent!==s[y]&&(e[3].textContent=s[y]));const g=Math.round((.44+c.progress*.56)*10)/10;g!==i&&(i=g,t.style.setProperty("--digit-opacity",g))},onLeave:function(c){t.style.setProperty("--digit-opacity","1.0"),i=1,o=1876},onComplete:function(){if(p.heroYearObj.year=1876,e&&e.length===4){const c=["1","8","7","6"];e.forEach((r,l)=>{r.textContent!==c[l]&&(r.textContent=c[l],r.setAttribute("data-digit",c[l]))})}t.style.setProperty("--digit-opacity","1.0"),i=1,o=1876},onLeaveBack:function(c){if(p.heroYearObj.year=2026,e&&e.length===4){const r=["2","0","2","6"];e.forEach((l,u)=>{l.textContent!==r[u]&&(l.textContent=r[u],l.setAttribute("data-digit",r[u]))})}t.style.setProperty("--digit-opacity","0.44"),i=.44,o=2026},onRefresh:c=>{n();const r=Math.round((.44+c.progress*.56)*100)/100;t.style.setProperty("--digit-opacity",r),i=r,o=Math.round(2026-c.progress*150)}}}),p.heroNumberTween.scrollTrigger?f.refresh():m.error("Hero countdown: ScrollTrigger creation failed!")}}else m.warn("#hero-number element not found for countdown animation.")}function I(){document.querySelectorAll(".pin-top-top").forEach(function(t){let e=t.parentElement;t.id==="cover-area"?f.create({trigger:"#cover-travel-area",start:"top top",end:"bottom top",pin:t,pinSpacing:!1,anticipatePin:1,onLeaveBack:o=>{o.pin.style.transform="translate3d(0px, 0px, 0px)"}}):t.id==="hero-area"?f.create({trigger:t,endTrigger:"#hero-travel-area",start:"top top",end:"bottom 80%",pin:t,pinSpacing:!1,anticipatePin:1,onLeaveBack:o=>{o.pin.style.transform="translate3d(0px, 0px, 0px)"}}):f.create({trigger:e,start:"top top",end:"bottom bottom",pin:t,pinSpacing:!1})})}export{H as initCoverArea,B as initHeroAnimation,R as initHeroNumberCountdown,I as initHeroPinning,q as playCoverAreaAnimation,M as setupHeroHeadingFadeAnimation};
