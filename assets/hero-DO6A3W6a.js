import{g as l,S as f}from"./index-B8M1MhT3.js";import T from"./index-BbrXr4yz.js";import{animationState as d}from"./animationConfig-BcZmv9NB.js";import{setEnterButtonClicked as E,playBackgroundAudio as x,setHeroAnimationComplete as k}from"./audio-CtC0un69.js";import{l as w}from"./logger-2Ii2FPkr.js";function C(t){if(window.scrollDownIcon&&document.contains(window.scrollDownIcon))return;const e=document.createElement("div");e.className="scroll-down-icon",e.innerHTML=`
    <div class="scroll-text">SCROLL</div>
    <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24">
      <title>mouse-scroll-down</title>
      <g fill="#F7F7F7">
        <g fill="none">
          <path d="M0 0h24v24h-24v-24Z"></path>
          <path class="mouse-body" stroke="#F7F7F7" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M12 17v0c-2.946 0-5.357-2.411-5.357-5.357v-4.286c-8.88178e-16-2.946 2.411-5.357 5.357-5.357v0c2.946 0 5.357 2.411 5.357 5.357v4.286c3.55271e-15 2.946-2.411 5.357-5.357 5.357Z"></path>
          <path class="scroll-arrow" stroke="#F7F7F7" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9 20L12 22 15 20"></path>
          <path class="scroll-indicator" stroke="#F7F7F7" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M12 6.286v2.143"></path>
        </g>
      </g>
    </svg>
  `,e.style.cssText=`
    position: fixed;
    bottom: calc(12vh - 16px);
    left: 50%;
    transform: translateX(-50%);
    z-index: 1000;
    opacity: 0;
    width: 64px;
    height: 90px;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 8px;
    transition: all 0.3s ease;
  `;const r=e.querySelector(".scroll-text");r&&(r.style.cssText=`
      color: #F7F7F7;
      font-size: 12px;
      font-weight: 400;
      letter-spacing: 2px;
      text-align: center;
      line-height: 1;
      margin: 0;
      padding: 0;
      text-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
    `);const a=document.querySelector("#hero-travel-area");a?a.appendChild(e):document.body.appendChild(e),l.to(e,{opacity:1,duration:.8,ease:"power2.out",delay:.3});const n=e.querySelector(".scroll-indicator");l.to(n,{y:3,duration:1.2,ease:"power2.inOut",repeat:-1,yoyo:!0});const s=e.querySelector(".scroll-arrow");l.to(s,{opacity:.6,duration:1.5,ease:"power2.inOut",repeat:-1,yoyo:!0}),f.create({trigger:"#cover-travel-area",start:"top top",end:"bottom 0%",scrub:.5,markers:!1,onUpdate:i=>{},onLeave:()=>{l.set(e,{opacity:0})},onEnterBack:()=>{l.set(e,{opacity:0})}}),window.scrollDownIcon=e,window.scrollDownIconCleanup=()=>{f.getAll().forEach(i=>{(i.trigger===e||i.vars?.trigger==="#cover-travel-area")&&(i.trigger===e||i.animation&&i.animation.targets().includes(e))&&i.kill()}),e&&e.parentNode&&e.remove(),window.scrollDownIcon=null,window.scrollDownIconCleanup=null}}let v=null,b=null;function H(){d.heroHeadingFadeScrollTrigger&&(d.heroHeadingFadeScrollTrigger.kill(),d.heroHeadingFadeScrollTrigger=null);const t=document.querySelector("#hero-area h1");if(t){let e=t.querySelectorAll(".char");if(!e||e.length===0){const n=t.getAttribute("data-original-content")||t.textContent;t.innerHTML=n;try{b&&(b.revert(),b=null),b=new T(t,{types:"words,chars",absolute:!1}),e=b.chars,l.set(e,{opacity:1,z:0,scale:1,filter:"blur(0px)",transformPerspective:1e3,transformOrigin:"center center"})}catch(s){w.error("Error re-splitting hero heading:",s);return}}if(!e||e.length===0){w.warn("Still no hero heading characters found after attempting re-split. Aborting animation setup.");return}t.offsetHeight;const r=[...e];for(let n=r.length-1;n>0;n--){const s=Math.floor(Math.random()*(n+1));[r[n],r[s]]=[r[s],r[n]]}const a=l.timeline({paused:!0});a.to(r,{opacity:0,z:-50,filter:"blur(16px)",stagger:.02,ease:"power1.in"},0),d.heroHeadingFadeScrollTrigger=f.create({animation:a,trigger:"#hero-travel-area",start:"16% top",end:"36% top",scrub:!0,markers:!1,invalidateOnRefresh:!0,onUpdate:n=>{n.progress===0?l.set(r,{opacity:1,z:0,scale:1,filter:"blur(0px)",clearProps:"transform"}):n.progress===1&&l.set(r,{opacity:0,z:-50,filter:"blur(16px)"})},onRefresh:n=>{a&&a.progress(n.progress)},onLeave:()=>{l.set(r,{opacity:0,z:-50,filter:"blur(16px)"})},onEnterBack:()=>{const n=d.heroHeadingFadeScrollTrigger?d.heroHeadingFadeScrollTrigger.progress:0;a&&a.progress(n)},onLeaveBack:()=>{l.set(r,{opacity:1,z:0,scale:1,filter:"blur(0px)",clearProps:"transform"}),a&&a.progress(0)}})}else w.warn("#hero-area h1 not found for fade animation setup.")}function B(){const t=document.querySelector("#cover-area .cover-logo"),e=document.querySelector("#countdown"),r=document.querySelector("#cover-area button.enter-experience"),a=document.querySelector("header"),n=document.querySelector("nav"),s=document.querySelector(".section-timeline"),i=document.querySelector("#app");if(!t||!r)return;i&&l.set(i,{opacity:0}),a&&l.set(a,{opacity:0}),s&&l.set(s,{opacity:0});const o=document.querySelector(".share-button-pinned");o&&l.set(o,{opacity:0}),window.lenis&&window.lenis.stop(),l.set(n,{opacity:1}),l.set(t,{position:"fixed",top:"calc(50% - 44px)",left:"50%",transform:"translate(-50%, -50%)",zIndex:1e3,opacity:0,scale:.95,pointerEvents:"none"}),e&&l.set(e,{opacity:0}),l.set(r,{opacity:0});const c=l.timeline({delay:.6}),p=document.querySelector("#initial-loader");i&&c.to(i,{opacity:1,duration:.6,ease:"power2.out",onStart:()=>{p&&(p.classList.add("hidden"),setTimeout(()=>{p.remove()},400))}}),c.to(t,{opacity:1,scale:1,pointerEvents:"auto",duration:1.2,ease:"power1.out"},"-=0.3"),e&&c.to(e,{opacity:1,duration:.4,ease:"power1.out"},"-=0.6"),c.to(r,{opacity:1,duration:.5,ease:"power2.out",onComplete:()=>{r.style.pointerEvents="auto"}},"-=0.2"),r&&r.addEventListener("click",()=>{r.style.pointerEvents="none",a&&l.to(a,{opacity:1,duration:.8,ease:"power2.inOut"}),s&&l.to(s,{opacity:1,duration:.8,ease:"power2.inOut",delay:.2}),window.userInteracted=!0,E(!0),window.enterButtonClicked=!0,window.enableMouseParticles&&window.enableMouseParticles(),document.dispatchEvent(new CustomEvent("veryEarlyParticleFade")),x(!0),window.audioRetryTimer||(window.audioRetryTimer=setInterval(()=>{window.audioInitialized?(clearInterval(window.audioRetryTimer),window.audioRetryTimer=null):window.enterButtonClicked&&!window.audioMuted&&(window.audioRetryCount<window.maxAudioRetries?x(!0):(w.warn(`Exceeded maximum audio retry attempts (${window.maxAudioRetries}). Stopping retries.`),clearInterval(window.audioRetryTimer),window.audioRetryTimer=null))},500)),window.lenis&&window.lenis.start(),l.to(r,{opacity:0,duration:.5,ease:"power2.in",onComplete:()=>{C(),r.style.pointerEvents="none"}}),o&&l.to(o,{opacity:1,duration:.8,delay:.4,ease:"power2.out"});const u=document.querySelector(".sound-toggle");u&&u.classList.add("active"),setTimeout(()=>{A(t,e)},100)})}function A(t,e){let r=null,a=-1,n=null,s=!1,i=!1;const o=document.querySelector("#cover-travel-area");if(o){const p=o.getBoundingClientRect(),u=p.height,y=window.innerHeight,m=Math.abs(p.top)/(u-y*.67);if(m>=.9)i=!0,l.set([t,e],{opacity:0}),a=0;else{const g=Math.max(0,1-m);l.set([t,e],{opacity:g}),a=g}}else l.set([t,e],{opacity:1});function c(){return r&&r.kill(),r=f.create({trigger:"#cover-travel-area",start:"top top",end:"67% center",scrub:.5,markers:!1,id:"cover-logo-fade",invalidateOnRefresh:!0,fastScrollEnd:!0,onUpdate:p=>{if(!s)return;const u=1-p.progress;Math.abs(u-a)>.01&&(a=u,t.style.opacity=u,n&&(n.kill(),n=null),e&&(e.style.opacity=u))},onLeave:()=>{s&&(n&&(n.kill(),n=null),t.style.opacity="0",t.style.pointerEvents="none",a=0,e&&(e.style.opacity="0"))},onEnterBack:()=>{if(!s)return;const u=1-r.progress;t.style.opacity=u,u>.1&&(t.style.pointerEvents="auto"),a=u,n&&(n.kill(),n=null),e&&(n=l.to(e,{opacity:u,duration:.8,delay:.4,ease:"power2.out",onUpdate:function(){parseFloat(e.style.opacity)},onComplete:function(){n=null}}))},onLeaveBack:()=>{s&&(n&&(n.kill(),n=null),t.style.opacity="1",t.style.pointerEvents="auto",a=1,e&&(e.style.opacity="1"))}}),setTimeout(()=>{if(s=!0,!i&&r){const p=r.progress,u=1-p;p>0&&p<1?(t.style.opacity=u,a=u,e&&(e.style.opacity=u)):p>=1&&(t.style.opacity="0",a=0,e&&(e.style.opacity="0"))}},200),r}return c()}function R(){const t=document.querySelector("#hero-area h1"),e=document.querySelector("#hero-number");if(!t||!e)return;t.getAttribute("data-original-content")||t.setAttribute("data-original-content",t.textContent),f.getAll().forEach(o=>{(o.vars.trigger==="#hero-area"||o.vars.trigger==="#hero-travel-area")&&o.kill()});const r=e.innerText||"2026";e.getAttribute("data-original-content")||e.setAttribute("data-original-content",r),e.innerHTML="",e.style.setProperty("--digit-opacity","0"),r.split("").forEach(o=>{const c=document.createElement("span");c.className="digit",c.textContent=o,c.setAttribute("data-digit",o),e.appendChild(c)}),l.set(e,{opacity:0}),l.set(t,{opacity:0}),v&&(v.revert(),v=null),v=new T(t,{types:"words,chars",absolute:!1});const a=v;l.set(a.chars,{opacity:0,z:150,scale:1.2,transformPerspective:1e3,transformOrigin:"center center",filter:"blur(16px)"});const n=[...a.chars];for(let o=n.length-1;o>0;o--){const c=Math.floor(Math.random()*(o+1));[n[o],n[c]]=[n[c],n[o]]}const s=l.timeline({paused:!0,onComplete:()=>{k(!0),window.heroAnimationComplete=!0;const o=new CustomEvent("heroAnimationComplete");document.dispatchEvent(o)}});s.to(t,{opacity:1,duration:.8,ease:"power2.out"}),s.to(n,{opacity:1,z:0,scale:1,filter:"blur(0px)",duration:1.25,stagger:.03,ease:"power2.out",onComplete:()=>{const o=new CustomEvent("particleFadeStart");document.dispatchEvent(o)}}),s.to(e,{opacity:1,duration:1.5,ease:"power1.inOut"});const i=e.querySelectorAll(".digit");if(l.set(i,{y:10,z:-120,transformPerspective:1e3,transformOrigin:"center center"}),s.to(i,{y:0,z:0,duration:2.5,stagger:.1,ease:"power3.out"},"-=0.6"),s.to(e,{"--digit-opacity":.44,duration:2.5,ease:"power3.out"},"-=2.5"),f.create({trigger:"#hero-travel-area",start:"top 90%",end:"top 0%",animation:s,scrub:.5,markers:!1,invalidateOnRefresh:!0,fastScrollEnd:!0,onEnter:()=>{const o=new CustomEvent("veryEarlyParticleFade");document.dispatchEvent(o)}}),e){let o=null;f.create({trigger:"#hero-travel-area",start:"15% top",end:"bottom bottom",scrub:.3,markers:!1,invalidateOnRefresh:!0,fastScrollEnd:!0,onUpdate:u=>{const y=Math.round((1-u.progress*.5)*1e3)/1e3;y!==o&&(o=y,e.style.transform=`scale(${y})`)},onLeave:()=>{e.style.transform="scale(0.5)",o=.5},onEnterBack:()=>{o=null},onLeaveBack:()=>{e.style.transform="scale(1)",o=1},id:"hero-scale"});let c=null,p=null;f.create({trigger:"#hero-travel-area",start:"bottom 90%",end:"bottom 80%",scrub:.3,markers:!1,invalidateOnRefresh:!0,fastScrollEnd:!0,onUpdate:function(u){const y=u.progress;let m=1;d.heroNumberTween&&d.heroNumberTween.scrollTrigger&&(m=.44+d.heroNumberTween.scrollTrigger.progress*.56);const g=Math.round(m*(1-y)*100)/100,h=Math.round(y*160)/10;g!==c&&(c=g,e.style.setProperty("--digit-opacity",g)),(p===null||Math.abs(h-p)>=.5)&&(p=h,e.style.filter=`blur(${h}px)`)},onLeave:()=>{e.style.setProperty("--digit-opacity","0"),e.style.filter="blur(16px)",c=0,p=16},onEnterBack:()=>{c=null,p=null},onLeaveBack:()=>{e.style.filter="blur(0px)",c=null,p=0},id:"hero-fade-out"})}}function I(){const t=document.querySelector("#hero-number");if(t){let e=null,r=null,a=null;const n=()=>{e=t.querySelectorAll(".digit")};requestAnimationFrame(n),d.heroNumberTween?(d.heroNumberTween.scrollTrigger&&d.heroNumberTween.scrollTrigger.enable(),d.heroNumberTween.resume()):(d.heroNumberTween=l.to(d.heroYearObj,{year:1876,ease:"none",paused:!0,scrollTrigger:{trigger:"#hero-travel-area",start:"15% top",end:"75% bottom",scrub:.5,markers:!1,invalidateOnRefresh:!0,fastScrollEnd:!0,id:"hero-countdown",onUpdate:function(s){const i=Math.round(2026-s.progress*150);if(i===r)return;r=i,d.heroYearObj.year=i;const o=Math.round((.44+s.progress*.56)*100)/100;(!e||e.length===0)&&n();const c=Math.floor(i/1e3),p=Math.floor(i%1e3/100),u=Math.floor(i%100/10),y=i%10;if(e&&e.length===4){const m=[c,p,u,y];for(let g=0;g<4;g++){const h=String(m[g]),S=e[g];S.textContent!==h&&(S.textContent=h,S.setAttribute("data-digit",h))}}o!==a&&(a=o,t.style.setProperty("--digit-opacity",o))},onLeave:function(s){t.style.setProperty("--digit-opacity","1.0"),a=1,r=1876},onComplete:function(){if(d.heroYearObj.year=1876,e&&e.length===4){const s=["1","8","7","6"];e.forEach((i,o)=>{i.textContent!==s[o]&&(i.textContent=s[o],i.setAttribute("data-digit",s[o]))})}t.style.setProperty("--digit-opacity","1.0"),a=1,r=1876},onLeaveBack:function(s){if(d.heroYearObj.year=2026,e&&e.length===4){const i=["2","0","2","6"];e.forEach((o,c)=>{o.textContent!==i[c]&&(o.textContent=i[c],o.setAttribute("data-digit",i[c]))})}t.style.setProperty("--digit-opacity","0.44"),a=.44,r=2026},onRefresh:s=>{n();const i=Math.round((.44+s.progress*.56)*100)/100;t.style.setProperty("--digit-opacity",i),a=i,r=Math.round(2026-s.progress*150)}}}),d.heroNumberTween.scrollTrigger?f.refresh():w.error("Hero countdown: ScrollTrigger creation failed!"))}else w.warn("#hero-number element not found for countdown animation.")}function N(){document.querySelectorAll(".pin-top-top").forEach(function(t){let e=t.parentElement;t.id==="cover-area"?f.create({trigger:"#cover-travel-area",start:"top top",end:"bottom top",pin:t,pinSpacing:!1,anticipatePin:1,onLeaveBack:r=>{r.pin.style.transform="translate3d(0px, 0px, 0px)"}}):t.id==="hero-area"?f.create({trigger:t,endTrigger:"#hero-travel-area",start:"top top",end:"bottom 80%",pin:t,pinSpacing:!1,anticipatePin:1,onLeaveBack:r=>{r.pin.style.transform="translate3d(0px, 0px, 0px)"}}):f.create({trigger:e,start:"top top",end:"bottom bottom",pin:t,pinSpacing:!1})})}export{B as initCoverArea,R as initHeroAnimation,I as initHeroNumberCountdown,N as initHeroPinning,H as setupHeroHeadingFadeAnimation};
