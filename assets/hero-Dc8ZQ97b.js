import{g as a,S as f}from"./index-Bvtry3m3.js";import x from"./index-BbrXr4yz.js";import{animationState as d}from"./animationConfig-BcZmv9NB.js";import{setEnterButtonClicked as E,playBackgroundAudio as S,setHeroAnimationComplete as T}from"./audio-BUKIxVk0.js";import{l as m}from"./logger-2Ii2FPkr.js";function C(r){if(window.scrollDownIcon&&document.contains(window.scrollDownIcon))return;const e=document.createElement("div");e.className="scroll-down-icon",e.innerHTML=`
    <div class="scroll-text">SCROLL</div>
    <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24">
      <title>mouse-scroll-down</title>
      <g fill="#F7F7F7">
        <g fill="none">
          <path d="M0 0h24v24h-24v-24Z"></path>
          <path class="mouse-body" stroke="#F7F7F7" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M12 17v0c-2.946 0-5.357-2.411-5.357-5.357v-4.286c-8.88178e-16-2.946 2.411-5.357 5.357-5.357v0c2.946 0 5.357 2.411 5.357 5.357v4.286c3.55271e-15 2.946-2.411 5.357-5.357 5.357Z"></path>
          <path class="scroll-arrow" stroke="#F7F7F7" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9 20L12 22 15 20"></path>
          <path class="scroll-indicator" stroke="#F7F7F7" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M12 6.286v2.143"></path>
        </g>
      </g>
    </svg>
  `,e.style.cssText=`
    position: fixed;
    bottom: calc(12vh - 16px);
    left: 50%;
    transform: translateX(-50%);
    z-index: 1000;
    opacity: 0;
    width: 64px;
    height: 90px;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 8px;
    transition: all 0.3s ease;
  `;const o=e.querySelector(".scroll-text");o&&(o.style.cssText=`
      color: #F7F7F7;
      font-size: 12px;
      font-weight: 400;
      letter-spacing: 2px;
      text-align: center;
      line-height: 1;
      margin: 0;
      padding: 0;
      text-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
    `);const i=r.parentElement;i?i.appendChild(e):document.body.appendChild(e),a.to(e,{opacity:1,duration:.8,ease:"power2.out",delay:.3});const t=e.querySelector(".scroll-indicator");a.to(t,{y:3,duration:1.2,ease:"power2.inOut",repeat:-1,yoyo:!0});const s=e.querySelector(".scroll-arrow");a.to(s,{opacity:.6,duration:1.5,ease:"power2.inOut",repeat:-1,yoyo:!0}),f.create({trigger:"#cover-travel-area",start:"top top",end:"bottom 70%",scrub:.5,markers:!1,onUpdate:u=>{const n=1-u.progress;a.set(e,{opacity:n,overwrite:!0})},onLeave:()=>{a.set(e,{opacity:0})},onEnterBack:()=>{a.set(e,{opacity:0})}}),window.scrollDownIcon=e,window.scrollDownIconCleanup=()=>{f.getAll().forEach(u=>{(u.trigger===e||u.vars?.trigger==="#cover-travel-area")&&(u.trigger===e||u.animation&&u.animation.targets().includes(e))&&u.kill()}),e&&e.parentNode&&e.remove(),window.scrollDownIcon=null,window.scrollDownIconCleanup=null}}let w=null,v=null;function H(){d.heroHeadingFadeScrollTrigger&&(d.heroHeadingFadeScrollTrigger.kill(),d.heroHeadingFadeScrollTrigger=null);const r=document.querySelector("#hero-area h1");if(r){let e=r.querySelectorAll(".char");if(!e||e.length===0){const t=r.getAttribute("data-original-content")||r.textContent;r.innerHTML=t;try{v&&(v.revert(),v=null),v=new x(r,{types:"words,chars",absolute:!1}),e=v.chars,a.set(e,{opacity:1,z:0,scale:1,filter:"blur(0px)",transformPerspective:1e3,transformOrigin:"center center"})}catch(s){m.error("Error re-splitting hero heading:",s);return}}if(!e||e.length===0){m.warn("Still no hero heading characters found after attempting re-split. Aborting animation setup.");return}r.offsetHeight;const o=[...e];for(let t=o.length-1;t>0;t--){const s=Math.floor(Math.random()*(t+1));[o[t],o[s]]=[o[s],o[t]]}const i=a.timeline({paused:!0});i.to(o,{opacity:0,z:-50,filter:"blur(16px)",stagger:.02,ease:"power1.in"},0),d.heroHeadingFadeScrollTrigger=f.create({animation:i,trigger:"#hero-travel-area",start:"16% top",end:"36% top",scrub:!0,markers:!1,invalidateOnRefresh:!0,onUpdate:t=>{t.progress===0?a.set(o,{opacity:1,z:0,scale:1,filter:"blur(0px)",clearProps:"transform"}):t.progress===1&&a.set(o,{opacity:0,z:-50,filter:"blur(16px)"})},onRefresh:t=>{i&&i.progress(t.progress)},onLeave:()=>{a.set(o,{opacity:0,z:-50,filter:"blur(16px)"})},onEnterBack:()=>{const t=d.heroHeadingFadeScrollTrigger?d.heroHeadingFadeScrollTrigger.progress:0;i&&i.progress(t)},onLeaveBack:()=>{a.set(o,{opacity:1,z:0,scale:1,filter:"blur(0px)",clearProps:"transform"}),i&&i.progress(0)}})}else m.warn("#hero-area h1 not found for fade animation setup.")}function B(){const r=document.querySelector("#cover-area .cover-logo"),e=document.querySelector("#countdown"),o=document.querySelector("#cover-area button.enter-experience"),i=document.querySelector("header"),t=document.querySelector("nav"),s=document.querySelector(".section-timeline"),u=document.querySelector("#app");if(!r||!o)return;u&&a.set(u,{opacity:0}),i&&a.set(i,{opacity:0}),s&&a.set(s,{opacity:0});const n=document.querySelector(".share-button-pinned");n&&a.set(n,{opacity:0}),window.lenis&&window.lenis.stop(),a.set(t,{opacity:1}),a.set(r,{position:"fixed",top:"calc(50% - 44px)",left:"50%",transform:"translate(-50%, -50%)",zIndex:1e3,opacity:0,scale:.95,pointerEvents:"none"}),e&&a.set(e,{opacity:0}),a.set(o,{opacity:0});const c=a.timeline({delay:.6}),p=document.querySelector("#initial-loader");u&&c.to(u,{opacity:1,duration:.6,ease:"power2.out",onStart:()=>{p&&(p.classList.add("hidden"),setTimeout(()=>{p.remove()},400))}}),c.to(r,{opacity:1,scale:1,pointerEvents:"auto",duration:1.2,ease:"power1.out"},"-=0.3"),e&&c.to(e,{opacity:1,duration:.4,ease:"power1.out"},"-=0.6"),c.to(o,{opacity:1,duration:.5,ease:"power2.out",onComplete:()=>{o.style.pointerEvents="auto"}},"-=0.2"),o&&o.addEventListener("click",()=>{o.style.pointerEvents="none",i&&a.to(i,{opacity:1,duration:.8,ease:"power2.inOut"}),s&&a.to(s,{opacity:1,duration:.8,ease:"power2.inOut",delay:.2}),window.userInteracted=!0,E(!0),window.enterButtonClicked=!0,window.enableMouseParticles&&window.enableMouseParticles(),document.dispatchEvent(new CustomEvent("veryEarlyParticleFade")),S(!0),window.audioRetryTimer||(window.audioRetryTimer=setInterval(()=>{window.audioInitialized?(clearInterval(window.audioRetryTimer),window.audioRetryTimer=null):window.enterButtonClicked&&!window.audioMuted&&(window.audioRetryCount<window.maxAudioRetries?S(!0):(m.warn(`Exceeded maximum audio retry attempts (${window.maxAudioRetries}). Stopping retries.`),clearInterval(window.audioRetryTimer),window.audioRetryTimer=null))},500)),window.lenis&&window.lenis.start(),a.to(o,{opacity:0,duration:.5,ease:"power2.in",onComplete:()=>{C(o),o.style.pointerEvents="none"}}),n&&a.to(n,{opacity:1,duration:.8,delay:.4,ease:"power2.out"});const l=document.querySelector(".sound-toggle");l&&l.classList.add("active"),setTimeout(()=>{k(r,e)},100)})}function k(r,e){let o=null,i=-1,t=null,s=!1,u=!1;const n=document.querySelector("#cover-travel-area");if(n){const p=n.getBoundingClientRect(),l=p.height,g=window.innerHeight,h=Math.abs(p.top)/(l-g*.67);if(h>=.9)u=!0,a.set([r,e],{opacity:0}),i=0;else{const y=Math.max(0,1-h);a.set([r,e],{opacity:y}),i=y}}else a.set([r,e],{opacity:1});function c(){return o&&o.kill(),o=f.create({trigger:"#cover-travel-area",start:"top top",end:"67% center",scrub:.5,markers:!1,id:"cover-logo-fade",invalidateOnRefresh:!0,fastScrollEnd:!0,onUpdate:p=>{if(!s)return;const l=1-p.progress;Math.abs(l-i)>.01&&(i=l,r.style.opacity=l,t&&(t.kill(),t=null),e&&(e.style.opacity=l))},onLeave:()=>{s&&(t&&(t.kill(),t=null),r.style.opacity="0",r.style.pointerEvents="none",i=0,e&&(e.style.opacity="0"))},onEnterBack:()=>{if(!s)return;const l=1-o.progress;r.style.opacity=l,l>.1&&(r.style.pointerEvents="auto"),i=l,t&&(t.kill(),t=null),e&&(t=a.to(e,{opacity:l,duration:.8,delay:.4,ease:"power2.out",onUpdate:function(){parseFloat(e.style.opacity)},onComplete:function(){t=null}}))},onLeaveBack:()=>{s&&(t&&(t.kill(),t=null),r.style.opacity="1",r.style.pointerEvents="auto",i=1,e&&(e.style.opacity="1"))}}),setTimeout(()=>{if(s=!0,!u&&o){const p=o.progress,l=1-p;p>0&&p<1?(r.style.opacity=l,i=l,e&&(e.style.opacity=l)):p>=1&&(r.style.opacity="0",i=0,e&&(e.style.opacity="0"))}},200),o}return c()}function R(){const r=document.querySelector("#hero-area h1"),e=document.querySelector("#hero-number");if(!r||!e)return;r.getAttribute("data-original-content")||r.setAttribute("data-original-content",r.textContent),f.getAll().forEach(n=>{(n.vars.trigger==="#hero-area"||n.vars.trigger==="#hero-travel-area")&&n.kill()});const o=e.innerText||"2026";e.getAttribute("data-original-content")||e.setAttribute("data-original-content",o),e.innerHTML="",e.style.setProperty("--digit-opacity","0"),o.split("").forEach(n=>{const c=document.createElement("span");c.className="digit",c.textContent=n,c.setAttribute("data-digit",n),e.appendChild(c)}),a.set(e,{opacity:0}),a.set(r,{opacity:0}),w&&(w.revert(),w=null),w=new x(r,{types:"words,chars",absolute:!1});const i=w;a.set(i.chars,{opacity:0,z:150,scale:1.2,transformPerspective:1e3,transformOrigin:"center center",filter:"blur(16px)"});const t=[...i.chars];for(let n=t.length-1;n>0;n--){const c=Math.floor(Math.random()*(n+1));[t[n],t[c]]=[t[c],t[n]]}const s=a.timeline({paused:!0,onComplete:()=>{T(!0),window.heroAnimationComplete=!0;const n=new CustomEvent("heroAnimationComplete");document.dispatchEvent(n)}});s.to(r,{opacity:1,duration:.8,ease:"power2.out"}),s.to(t,{opacity:1,z:0,scale:1,filter:"blur(0px)",duration:1.25,stagger:.03,ease:"power2.out",onComplete:()=>{const n=new CustomEvent("particleFadeStart");document.dispatchEvent(n)}}),s.to(e,{opacity:1,duration:1.5,ease:"power1.inOut"});const u=e.querySelectorAll(".digit");if(a.set(u,{y:10,z:-120,transformPerspective:1e3,transformOrigin:"center center"}),s.to(u,{y:0,z:0,duration:2.5,stagger:.1,ease:"power3.out"},"-=0.6"),s.to(e,{"--digit-opacity":.44,duration:2.5,ease:"power3.out"},"-=2.5"),f.create({trigger:"#hero-travel-area",start:"top 90%",end:"top 0%",animation:s,scrub:.5,markers:!1,invalidateOnRefresh:!0,fastScrollEnd:!0,onEnter:()=>{const n=new CustomEvent("veryEarlyParticleFade");document.dispatchEvent(n)}}),e){let n=null;f.create({trigger:"#hero-travel-area",start:"15% top",end:"bottom bottom",scrub:.3,markers:!1,invalidateOnRefresh:!0,fastScrollEnd:!0,onUpdate:l=>{const g=Math.round((1-l.progress*.5)*1e3)/1e3;g!==n&&(n=g,e.style.transform=`scale(${g})`)},onLeave:()=>{e.style.transform="scale(0.5)",n=.5},onEnterBack:()=>{n=null},onLeaveBack:()=>{e.style.transform="scale(1)",n=1},id:"hero-scale"});let c=null,p=null;f.create({trigger:"#hero-travel-area",start:"bottom 90%",end:"bottom 80%",scrub:.3,markers:!1,invalidateOnRefresh:!0,fastScrollEnd:!0,onUpdate:function(l){const g=l.progress;let h=1;d.heroNumberTween&&d.heroNumberTween.scrollTrigger&&(h=.44+d.heroNumberTween.scrollTrigger.progress*.56);const y=Math.round(h*(1-g)*100)/100,b=Math.round(g*160)/10;y!==c&&(c=y,e.style.setProperty("--digit-opacity",y)),(p===null||Math.abs(b-p)>=.5)&&(p=b,e.style.filter=`blur(${b}px)`)},onLeave:()=>{e.style.setProperty("--digit-opacity","0"),e.style.filter="blur(16px)",c=0,p=16},onEnterBack:()=>{c=null,p=null},onLeaveBack:()=>{e.style.filter="blur(0px)",c=null,p=0},id:"hero-fade-out"})}}function N(){const r=document.querySelector("#hero-number");if(r){let e=null,o=null;d.heroNumberTween?(d.heroNumberTween.scrollTrigger&&d.heroNumberTween.scrollTrigger.enable(),d.heroNumberTween.resume()):(d.heroNumberTween=a.to(d.heroYearObj,{year:1876,ease:"none",paused:!0,scrollTrigger:{trigger:"#hero-travel-area",start:"15% top",end:"75% bottom",scrub:.5,markers:!1,invalidateOnRefresh:!0,fastScrollEnd:!0,id:"hero-countdown",onUpdate:function(i){const t=Math.round(2026-i.progress*150);if(t===e)return;e=t,d.heroYearObj.year=t;const s=Math.round((.44+i.progress*.56)*100)/100,u=t.toString(),n=r.querySelectorAll(".digit"),c=u.split("");n.length!==c.length?(r.innerHTML="",c.forEach(p=>{const l=document.createElement("span");l.className="digit",l.textContent=p,l.setAttribute("data-digit",p),r.appendChild(l)})):n.forEach((p,l)=>{p.textContent!==c[l]&&(p.textContent=c[l],p.setAttribute("data-digit",c[l]))}),s!==o&&(o=s,r.style.setProperty("--digit-opacity",s))},onLeave:function(i){r.style.setProperty("--digit-opacity","1.0"),o=1,e=1876},onComplete:function(){d.heroYearObj.year=1876;const i=document.querySelector("#hero-number");if(i){const t=i.querySelectorAll(".digit"),s="1876".split("");t.forEach((u,n)=>{u.textContent!==s[n]&&(u.textContent=s[n],u.setAttribute("data-digit",s[n]))}),i.style.setProperty("--digit-opacity","1.0"),o=1,e=1876}},onLeaveBack:function(i){d.heroYearObj.year=2026;const t=document.querySelector("#hero-number");if(t){const s=t.querySelectorAll(".digit"),u="2026".split("");s.forEach((n,c)=>{n.textContent!==u[c]&&(n.textContent=u[c],n.setAttribute("data-digit",u[c]))}),t.style.setProperty("--digit-opacity","0.44"),o=.44,e=2026}},onRefresh:i=>{const t=Math.round((.44+i.progress*.56)*100)/100;r.style.setProperty("--digit-opacity",t),o=t,e=Math.round(2026-i.progress*150)}}}),d.heroNumberTween.scrollTrigger?f.refresh():m.error("Hero countdown: ScrollTrigger creation failed!"))}else m.warn("#hero-number element not found for countdown animation.")}function I(){document.querySelectorAll(".pin-top-top").forEach(function(r){let e=r.parentElement;r.id==="cover-area"?f.create({trigger:"#cover-travel-area",start:"top top",end:"bottom top",pin:r,pinSpacing:!1,anticipatePin:1,onLeaveBack:o=>{o.pin.style.transform="translate3d(0px, 0px, 0px)"}}):r.id==="hero-area"?f.create({trigger:r,endTrigger:"#hero-travel-area",start:"top top",end:"bottom 80%",pin:r,pinSpacing:!1,anticipatePin:1,onLeaveBack:o=>{o.pin.style.transform="translate3d(0px, 0px, 0px)"}}):f.create({trigger:e,start:"top top",end:"bottom bottom",pin:r,pinSpacing:!1})})}export{B as initCoverArea,R as initHeroAnimation,N as initHeroNumberCountdown,I as initHeroPinning,H as setupHeroHeadingFadeAnimation};
